<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-g" />
    <title>Sistema Pizzería Piamonte</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Estilos para un scrollbar más discreto y moderno */
      ::-webkit-scrollbar {
        width: 12px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #d1d5db;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #9ca3af;
      }

      /* Estilo para el botón de tamaño activo en los modales */
      .size-button.active {
        background-color: #3b82f6;
        color: white;
        border-color: #3b82f6;
      }

      /* Estilo mejorado para la pestaña activa */
      .tab-button.active {
        border-color: #3b82f6;
        color: #2563eb;
        background-color: #f9fafb;
      }
      
      /* --- ESTILOS MEJORADOS PARA LA BARRA DE TÍTULO --- */
      #title-bar {
        -webkit-app-region: drag; /* Permite arrastrar la ventana */
        background-color: #f8f9fa;
        border-bottom: 1px solid #dee2e6;
        height: 2.5rem; /* 40px */
      }

      #title-bar-btns {
        -webkit-app-region: no-drag; /* Evita que los botones sean arrastrables */
      }
      
      .title-bar-btn {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 3rem; /* 48px */
        height: 2.5rem; /* 40px */
        transition: background-color 0.2s ease;
      }

      .title-bar-btn:hover {
        background-color: #e9ecef;
      }
      
      #close-btn:hover {
        background-color: #e63946;
        color: white;
      }

      .z-10 {
          z-index: 0 !important;
      }

    </style>
</head>
<body class="bg-gray-100 font-sans antialiased text-gray-800 overflow-hidden">
    <div id="title-bar" class="w-full flex justify-between items-center fixed top-0 left-0 z-50 text-gray-700">
      <div class="pl-4 font-semibold text-sm">
        Pizzería Piamonte
      </div>
        <div id="title-bar-btns">
            <button id="minimize-btn" class="title-bar-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            </button>
            <button id="maximize-btn" class="title-bar-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>
            </button>
            <button id="close-btn" class="title-bar-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
    </div>

    <div class="flex h-screen pt-10"> <aside class="w-1/3 max-w-md bg-white p-6 shadow-2xl flex flex-col">
        <h2 class="text-3xl font-bold mb-4 text-gray-900 border-b pb-3">Pedido Actual</h2>
        
        <div class="flex-grow overflow-y-auto pr-2 space-y-4">
          <div class="space-y-4" style="
          padding-left: 8px;
          padding-top: 8px;
          padding-right: 8px;
          padding-bottom: 8px;
      ">
            <input type="text" id="customer-name" class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="Nombre Cliente o Mesa *">
            <input type="tel" id="customer-phone" class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="Teléfono (Opcional)">
          </div>
          
          <hr class="my-3">

          <div id="order-details" class="space-y-4 text-sm">
            <div>
              <h3 class="font-semibold mb-2">Entrega</h3>
              <div class="flex gap-4"><label class="flex items-center cursor-pointer"><input id="delivery-delay" name="delivery-type" type="radio" value="demora" class="mr-2" checked>Demora</label><label class="flex items-center cursor-pointer"><input id="delivery-scheduled" name="delivery-type" type="radio" value="agendado" class="mr-2">Agendado</label></div>
              <div id="delivery-delay-input" class="mt-2"><input type="number" id="delay-minutes" value="25" class="w-full p-2 text-sm border border-gray-200 rounded-md" placeholder="Minutos"></div>
              <div id="delivery-scheduled-input" class="mt-2 hidden"><input type="time" id="scheduled-time" class="w-full p-2 text-sm border border-gray-200 rounded-md"></div>
            </div>
            <div>
              <h3 class="font-semibold mb-2">Pago</h3>
              <div class="flex gap-4"><label class="flex items-center cursor-pointer"><input id="status-unpaid" name="payment-status" type="radio" value="Por Pagar" class="mr-2" checked>Por Pagar</label><label class="flex items-center cursor-pointer"><input id="status-paid" name="payment-status" type="radio" value="Pagado" class="mr-2">Pagado</label></div>
              <div id="payment-method-wrapper" class="mt-2 hidden">
                  <select id="payment-method" class="w-full p-2 text-sm border border-gray-200 rounded-md">
                      <option>Efectivo</option><option>Debito</option><option>Credito</option><option>Edenred</option><option>Pluxee</option><option>Amipass</option><option value="otra">Otra</option>
                  </select>
                  <div id="other-payment-wrapper" class="mt-2 hidden"><input type="text" id="other-payment-method" class="w-full p-2 text-sm border border-gray-200 rounded-md" placeholder="Especificar..."></div>
              </div>
            </div>
          </div>

          <div id="order-summary" class="mt-4 pt-4 border-t-2 border-dashed">
              <p class="text-center text-gray-500 py-8">El pedido está vacío</p>
          </div>
        </div>

        <div class="mt-auto pt-4 border-t">
            <div class="flex justify-between items-center text-xl font-bold mb-4">
                <span>TOTAL:</span>
                <span id="total-price" class="text-blue-600">$0</span>
            </div>
            
            <div id="action-buttons-container" class="space-y-2">
                <button id="update-order-btn" class="w-full bg-yellow-500 text-white font-bold py-4 rounded-lg text-lg hover:bg-yellow-600 transition-colors hidden">Actualizar Pedido</button>
                <button id="finalize-order-btn" class="w-full bg-green-500 text-white font-bold py-4 rounded-lg text-lg hover:bg-green-600 transition-colors">Finalizar Pedido</button>
            </div>
        </div>
      </aside>

      <main class="w-2/3 flex-1 flex flex-col overflow-hidden">
        
        <div class="px-6 pt-6 bg-gray-100 z-10">
          <div class="flex border-b">
            <button class="tab-button active py-2 px-6 font-semibold border-b-4" data-target="catalog-tab-content">Catálogo</button>
            <button class="tab-button py-2 px-6 font-semibold border-b-4 border-transparent text-gray-500 hover:text-blue-600" data-target="history-tab-content">Historial</button>
            <button class="tab-button py-2 px-6 font-semibold border-b-4 border-transparent text-gray-500 hover:text-blue-600" data-target="inventory-tab-content">Inventario</button>
            <button class="tab-button py-2 px-6 font-semibold border-b-4 border-transparent text-gray-500 hover:text-blue-600" data-target="settings-tab-content">Configuración</button>
          </div>
        </div>

        <div class="flex-1 overflow-y-auto">
        
          <div id="catalog-tab-content" class="tab-content flex flex-col p-6">
            <div class="flex justify-between items-center mb-4">
              <div class="flex gap-2 bg-gray-200 p-1 rounded-lg">
                <button class="sub-tab-button active px-4 py-1 text-sm font-semibold rounded-md bg-white shadow-sm" data-target="pizzas-tab">Pizzas</button>
                <button class="sub-tab-button px-4 py-1 text-sm font-semibold rounded-md" data-target="churrascos-tab">Churrascos</button>
                <button class="sub-tab-button px-4 py-1 text-sm font-semibold rounded-md" data-target="otros-tab">Otros Productos</button>
              </div>
              <div class="relative w-1/3">
                <input type="text" id="search-products" class="w-full p-2 pl-10 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Buscar producto...">
                <svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
              </div>
            </div>
            
            <div id="catalog-content">
              <div id="pizzas-tab" class="sub-tab-content grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
              <div id="churrascos-tab" class="sub-tab-content hidden grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
              <div id="otros-tab" class="sub-tab-content hidden"></div>
            </div>
          </div>

          <div id="history-tab-content" class="tab-content hidden p-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-xl font-bold">Historial de Hoy</h2>
              <button id="report-btn" class="bg-gray-700 text-white text-sm font-semibold py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors">Generar Reporte Diario</button>
            </div>
            <div id="history-list" class="space-y-4"></div>
          </div>
          
          <div id="inventory-tab-content" class="tab-content hidden p-6">
              <div class="flex justify-between items-center mb-6 border-b pb-4">
                  <h2 class="text-2xl font-bold">Gestión de Inventario</h2>
                  <button id="save-inventory-btn" class="bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors">Guardar Cambios</button>
              </div>
              <div id="inventory-container" class="space-y-6">
                  </div>
          </div>

          <div id="settings-tab-content" class="tab-content hidden p-6">
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <h2 class="text-2xl font-bold">Configuración de Precios</h2>
                <button id="save-prices-btn" class="bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors">Guardar Cambios</button>
            </div>
            <div id="price-settings-container" class="space-y-8">
                </div>
          </div>

        </div>
      </main>
      </div>

    <div id="pizza-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4">
        <div class="bg-white p-6 rounded-lg shadow-xl w-1/2 max-w-2xl">
          <h2 id="modal-pizza-name" class="text-3xl font-bold mb-4"></h2>
          <div class="mb-4"><h3 class="font-semibold text-lg mb-2">Tamaño</h3><div id="size-options" class="flex gap-2"><button class="size-button border rounded-md px-4 py-2" data-size="chica">Chica</button><button class="size-button border rounded-md px-4 py-2" data-size="mediana">Mediana</button><button class="size-button border rounded-md px-4 py-2" data-size="xl">XL</button></div></div>
          <div id="half-and-half-section" class="hidden mb-4 p-3 bg-gray-100 rounded-lg"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" id="half-and-half-checkbox"><span class="font-semibold">Pedir Mitad y Mitad</span></label><div id="half-options" class="hidden mt-2 grid grid-cols-2 gap-4"><select id="half-1" class="border p-2 rounded"></select><select id="half-2" class="border p-2 rounded"></select></div></div>
          <div class="mb-4">
            <h3 class="font-semibold text-lg mb-2">Agregados</h3>
            <div class="relative mb-2">
                <input type="text" id="search-extras" class="w-full p-2 pl-8 text-sm border border-gray-300 rounded-lg focus:outline-none" placeholder="Buscar agregado...">
                <svg class="w-4 h-4 absolute left-2 top-1/2 -translate-y-1/2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            </div>
            <div id="extras-container" class="grid grid-cols-3 gap-2 max-h-32 overflow-y-auto p-2 border rounded"></div>
          </div>
          <div class="mb-6"><h3 class="font-semibold text-lg mb-2">Notas Adicionales</h3><textarea id="pizza-notes" class="w-full p-2 border rounded" placeholder="Ej: Sin cebolla, masa bien cocida..."></textarea></div>
          <div class="flex justify-between items-center"><span id="modal-pizza-price" class="text-2xl font-bold"></span><div class="flex gap-4"><button id="cancel-button" class="px-6 py-2 bg-gray-300 rounded-lg font-semibold hover:bg-gray-400">Cancelar</button><button id="add-to-order-button" class="px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700">Añadir al Pedido</button></div></div>
        </div>
    </div>
    <div id="preview-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center p-4">
        <div class="bg-white p-4 rounded-lg shadow-xl w-1/3 flex flex-col" style="height: 90vh;">
          <h2 class="text-2xl font-bold mb-4 border-b pb-2">Vista Previa del Ticket</h2>
          <div class="flex-grow border rounded-md overflow-hidden"><embed id="pdf-preview" src="" type="application/pdf" width="100%" height="100%"></div>
          <div class="flex gap-4 mt-4"><button id="preview-cancel-btn" class="w-full px-6 py-3 bg-gray-300 rounded-lg font-semibold hover:bg-gray-400">Cancelar</button><button id="preview-confirm-btn" class="w-full px-6 py-3 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600">Confirmar Impresión</button></div>
        </div>
    </div>
    <div id="notes-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4">
        <div class="bg-white p-6 rounded-lg shadow-xl w-1/3">
          <h2 id="notes-modal-product-name" class="text-2xl font-bold mb-4"></h2>
          <div class="mb-4"><h3 class="font-semibold text-lg mb-2">Indicaciones Adicionales</h3><textarea id="product-notes" class="w-full p-2 border rounded" placeholder="Ej: Sin tomate, bien cocido..."></textarea></div>
          <div class="flex gap-4 mt-4"><button id="notes-cancel-btn" class="w-full px-6 py-2 bg-gray-300 rounded-lg font-semibold hover:bg-gray-400">Cancelar</button><button id="notes-confirm-btn" class="w-full px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700">Añadir al Pedido</button></div>
        </div>
    </div>
    <div id="confirm-payment-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4">
        <div class="bg-white p-6 rounded-lg shadow-xl w-1/3">
          <h2 class="text-2xl font-bold mb-4">Confirmar Pago</h2>
          <div class="mb-4"><label for="history-payment-method" class="block text-sm font-medium text-gray-700">Forma de Pago</label><select id="history-payment-method" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"><option>Efectivo</option><option>Debito</option><option>Credito</option><option>Edenred</option><option>Pluxee</option><option>Amipass</option><option value="otra">Otra</option></select><div id="history-other-payment-wrapper" class="mt-2 hidden"><label for="history-other-payment-method" class="block text-sm font-medium text-gray-700">Especificar otra forma de pago</label><input type="text" id="history-other-payment-method" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3"></div></div>
          <div class="flex gap-4 mt-4"><button id="payment-cancel-btn" class="w-full px-6 py-2 bg-gray-300 rounded-lg font-semibold hover:bg-gray-400">Cancelar</button><button id="payment-confirm-btn" class="w-full px-6 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600">Confirmar Pago</button></div>
        </div>
    </div>
    <div id="custom-pizza-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4">
        <div class="bg-white p-6 rounded-lg shadow-xl w-1/2 max-w-lg">
          <h2 class="text-3xl font-bold mb-4">Pizza Personalizada</h2>
          <div class="mb-4">
            <h3 class="font-semibold text-lg mb-2">Tamaño</h3>
            <div id="custom-size-options" class="flex gap-2">
              <button class="size-button border rounded-md px-4 py-2" data-size="chica">Chica</button>
              <button class="size-button border rounded-md px-4 py-2 active" data-size="mediana">Mediana</button>
              <button class="size-button border rounded-md px-4 py-2" data-size="xl">XL</button>
            </div>
          </div>
          <div class="mb-4">
            <h3 class="font-semibold text-lg mb-2">Ingredientes</h3>
            <textarea id="custom-pizza-ingredients" class="w-full p-2 border rounded" placeholder="Ej: Carne, tocino, doble queso..."></textarea>
          </div>
          <div class="mb-6">
            <h3 class="font-semibold text-lg mb-2">Precio Final</h3>
            <input type="number" id="custom-pizza-price-input" class="w-full p-2 border rounded" placeholder="Ej: 12500">
          </div>
          <div class="flex justify-end gap-4">
            <button id="custom-cancel-button" class="px-6 py-2 bg-gray-300 rounded-lg font-semibold hover:bg-gray-400">Cancelar</button>
            <button id="custom-add-to-order-button" class="px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700">Añadir al Pedido</button>
          </div>
        </div>
    </div>
    <div id="confirm-delete-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4" style="z-index: 9998;">
        <div class="bg-white p-6 rounded-lg shadow-xl w-1/3 max-w-sm">
          <h2 class="text-xl font-bold mb-4">Confirmar Eliminación</h2>
          <p id="confirm-delete-message" class="mb-6">¿Estás seguro de que deseas eliminar este pedido? Esta acción no se puede deshacer.</p>
          <div class="flex justify-end gap-4">
            <button id="delete-cancel-btn" class="px-6 py-2 bg-gray-300 rounded-lg font-semibold hover:bg-gray-400">Cancelar</button>
            <button id="delete-confirm-btn" class="px-6 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700">Eliminar</button>
          </div>
        </div>
    </div>
    <div id="alert-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4" style="z-index: 9999;">
        <div class="bg-white p-6 rounded-lg shadow-xl w-1/3 max-w-sm">
          <h2 class="text-xl font-bold mb-4">Aviso</h2>
          <p id="alert-modal-message" class="mb-6"></p>
          <div class="flex justify-end">
            <button id="alert-modal-close-btn" class="px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Aceptar</button>
          </div>
        </div>
    </div>
    
    <script src="./renderer.js"></script>
  </body>
</html>